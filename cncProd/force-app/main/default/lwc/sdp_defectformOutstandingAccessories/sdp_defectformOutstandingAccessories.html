<template>
    <!-- THIS IS FOR THE NORMAL EDIT PAGE-->

    <!--
    
        Changelog ---- NSJ
        Unique Key          Field (Outstanding Accessory)    
        Update unique Key	Field Update	                Outstanding Accessory
        Update unique Key	Workflow Rule	                Outstanding Accessory
    
    -->

    <template if:true={editMode}>
        <div class="container" style={containerstyle}>
            <br />
            <a href="#" class="btn-add" data-toggle="modal" data-target="#modalAddOns" style="float:right;padding:1%"
                onclick={AddOustandingAccessories}>
                <span>
                    <c-svg-cmp url-to-resource='/BootStrap/images/icons/icons.svg#icon-add' svg-class="icon icon-add"
                        svg-role="img" svg-aria-hidden="true">
                    </c-svg-cmp>
                </span>
                Add Accesories
            </a>

            <div data-id="assignDevice" class="customisedcontent" style={screenheight}>
                <!--class="customisedcontent"-->
                <template if:true={recordDetected}>
                    <div class="container">
                        <template for:each={recordStorage} for:item="eachrecord" if:true={recordStorage}>
                            <div key={eachrecord.Id} class="row bottomborder" style="padding:1%">
                                <div class="col-sm-11" style="padding-top:2%;">
                                    <div style="color:darkgrey">
                                        Outstanding Accessory {eachrecord.sNo}
                                    </div>
                                    <div style="font-size:large;padding-top:5px;">
                                        {eachrecord.AccessoryName__c}
                                    </div>
                                </div>
                                <div class="col-sm-1" style="padding-top:1%;">
                                    <div data-id={eachrecord.Id} class="edit" onclick={SelectedRecordDetails}
                                        style="float:right">
                                        <span>
                                            <c-img-cmp data-id={eachrecord.Id} style-width="19px"
                                                url-to-resource='/BootStrap/images/icons/edit.png'></c-img-cmp>
                                            <!--
                                            <svg data-id={eachrecord.Id} class="icon" role="img" aria-hidden="true"
                                                viewBox="0 0 24 24">
                                                <g data-id={eachrecord.Id}>
                                                    <path data-id={eachrecord.Id}
                                                        d="M 19.171875 2 C 18.448125 2 17.724375 2.275625 17.171875 2.828125 L 16 4 L 20 8 L 21.171875 6.828125 C 22.275875 5.724125 22.275875 3.933125 21.171875 2.828125 C 20.619375 2.275625 19.895625 2 19.171875 2 z M 14.5 5.5 L 5 15 C 5 15 6.005 15.005 6.5 15.5 C 6.995 15.995 6.984375 16.984375 6.984375 16.984375 C 6.984375 16.984375 8.004 17.004 8.5 17.5 C 8.996 17.996 9 19 9 19 L 18.5 9.5 L 14.5 5.5 z M 3.6699219 17 L 3.0136719 20.503906 C 2.9606719 20.789906 3.2100938 21.039328 3.4960938 20.986328 L 7 20.330078 L 3.6699219 17 z"
                                                        fill="#118ed8">
                                                    </path>
                                                </g>
                                            </svg>
                                                -->
                                        </span>
                                    </div>
                                    <br />
                                    <br />
                                    <div data-id={eachrecord.Id} class="edit" onclick={SelectedRecordDelete}
                                        style="float:right;padding-bottom:1%">
                                        <span>
                                            <c-svg-cmp data-id={eachrecord.Id}
                                                url-to-resource='/BootStrap/images/icons/icons.svg#icon-delete'
                                                svg-class="icon" svg-role="img" svg-aria-hidden="true">
                                            </c-svg-cmp>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </template>
                <template if:false={recordDetected}>
                    <div class="NoRecordClass" style="color:#989eac;font-size:larger">
                        There are currently no outstanding accessories recorded
                    </div>
                </template>
            </div>

            <div class="buttonatbottom">
                <div if:false={recordDetected}>
                    <button type="button" class="btn btn-primary nextpagebutton" disabled>Select Service
                        Centre</button>
                </div>
                <div if:true={recordDetected}>
                    <button type="button" class="btn btn-primary nextpagebutton" onclick={onProcessStepChange}>Select
                        Service
                        Centre</button>
                </div>
            </div>
        </div>
    </template>
    <!-- THIS IS FOR THE NORMAL EDIT PAGE-->

    <!-- THIS IS FOR THE REVIEW PAGE-->
    <template if:false={editMode}>
        <div if:true={recordDetected}>
            <div class="container">
                <template for:each={recordStorage} for:item="eachrecord" if:true={recordStorage}>
                    <div key={eachrecord.Id} class="row bottomborder" style="padding:1%">
                        <div class="col-sm-11" style="padding-top:2%;">
                            <div style="color:darkgrey">
                                Outstanding Accessory {eachrecord.sNo}
                            </div>
                            <div style="font-size:large">
                                {eachrecord.AccessoryName__c}
                            </div>
                        </div>
                        <div class="col-sm-1" style="padding-top:1%;">
                            <div data-id={eachrecord.Id} class="edit" onclick={SelectedRecordDetails}
                                style="float:right">
                                <span>
                                        <c-img-cmp data-id={eachrecord.Id} style-width="19px"
                                        url-to-resource='/BootStrap/images/icons/edit.png'></c-img-cmp>
                                </span>
                            </div>
                            <br />
                            <br />
                            <div data-id={eachrecord.Id} class="edit" onclick={SelectedRecordDelete}
                                style="float:right;padding-bottom:1%">
                                <span>
                                    <c-svg-cmp data-id={eachrecord.Id}
                                        url-to-resource='/BootStrap/images/icons/icons.svg#icon-delete' svg-class="icon"
                                        svg-role="img" svg-aria-hidden="true">
                                    </c-svg-cmp>
                                </span>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </div>

        <div if:false={recordDetected} style="text-align:center;font-size:large;color:#989eac">
            <br />
            There are currently no outstanding accessories recorded
        </div>
    </template>
    <!-- THIS IS FOR THE REVIEW PAGE-->

    <template if:true={modalActivated}>
        <div data-id="OutstandingAccessoriesModal"></div>
        <template if:true={spinner}>
            <div class="d-flex justify-content-center centralisedAbsolute">
                <div class="spinner-border m-5" role="status" style="width: 3rem; height: 3rem;">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </template>
        <template if:false={spinner}>
            <div class="modal-dialog">
                <div class="modal-content additionalModalCSS">

                    <div style="height:400px">
                        <h3 style="text-align:center">Outstanding Accessory {CurrentName}</h3>
                        <template if:true={isError}>
                            <div data-name="ErrorHeaderOffsetSticky" class="header-snap scroller sticky" style="padding: 2.0rem 0; margin: 1rem 0 0rem; position: inherit; top: 0px; background: #fc6c6c; ">
                                <div class="container">
                                    <div class="row justify-content-md-center">
                                        <span>{errorMsg}</span>
                                    </div>
                                    </div>
                            </div>
                            
                        </template>
                        <br />
                        <template if:true={accessoriesPicklistValue}>
                            <c-pick-list-as-list-cmp-apex api-field-name="SAAccessory__c"
                                field-label="Outstanding Accessory" placeholder="Select Outstanding Accessories"
                                field-style="form-control select" onvaluechanged={onValueChangedDetected}
                                pick-list-value={accessoriesPicklistValue} existing-value={CurrentSelectedAccessory}
                                focuson="true">
                            </c-pick-list-as-list-cmp-apex>
                        </template>
                        <div style="font-weight:bold;">
                            NOTE:
                        </div>
                        Sales consultant will revert once we are ready for accessory installation at
                        <br />
                        <a style="font-weight:bold">
                            239 Alexandra Road.
                        </a>
                    </div>

                    <!-- Review Page only have 'Save and Cancel' -->
                    <div class="modal-footer">
                        <template if:true={editMode}>
                            <button type="button" class="btn btn-custom btn-xs"
                                style="width:50%;border-color:#2196f3;border-radius:20px;border-width:thin;border-style:solid;font-weight:bold"
                                onclick={CancelButton}>Cancel</button>
                            <button type="button" class="btn btn-primary btn-xs"
                                style="width:50%;border-width:thin;border-style:solid"
                                onclick={SaveAndClose}>Save</button>
                            <button type="button" class="btn btn-primary btn-xs"
                                style="width:120%;border-width:thin;border-style:solid" onclick={SaveAndContinue}>Save
                                and add new</button>
                        </template>
                        <template if:false={editMode}>
                            <button type="button" class="btn btn-custom btn-xs"
                                style="width:40%;border-color:#2196f3;border-radius:20px;border-width:thin;border-style:solid;font-weight:bold"
                                onclick={CancelButton}>Cancel</button>
                            <button type="button" class="btn btn-primary btn-xs"
                                style="width:40%;border-width:thin;border-style:solid"
                                onclick={SaveAndClose}>Save</button>
                        </template>
                    </div>
                </div>
            </div>
        </template>
    </template>
</template>